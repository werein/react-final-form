!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e=e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,P,F){"use strict";var E="default"in P?P.default:P;function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};var n,r,i={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}function w(e,t,n){var r=e.render,i=e.children,u=e.component,a=V(e,["render","children","component"]);if(u)return P.createElement(u,U({},a,{},t,{children:i,render:r}));if(r)return r(void 0===i?Object.assign(t,a):Object.assign(t,a,{children:i}));if("function"!=typeof i)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+n);return i(Object.assign(t,a))}function C(e,t,n){void 0===n&&(n=function(e,t){return e===t});var r=E.useRef(e);E.useEffect(function(){n(e,r.current)||(t(),r.current=e)})}var k=function(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),u=0;u<n.length;u++){var a=n[u];if(!i(a)||e[a]!==t[a])return!1}return!0},j=function(e){return!(!e||"function"!=typeof e.stopPropagation)},x=P.createContext();function A(e){var t=E.useRef(e);return E.useEffect(function(){t.current=e}),t}function D(t,n,e){e.forEach(function(e){Object.defineProperty(t,e,{get:function(){return n[e]}})})}var t="6.3.0",R=function(e,t){return D(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},q={"final-form":F.version,"react-final-form":t},B=F.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function n(e){var t=e.debug,n=e.decorators,r=e.destroyOnUnregister,i=e.form,u=e.initialValues,a=e.initialValuesEqual,o=e.keepDirtyOnReinitialize,c=e.mutators,l=e.onSubmit,f=e.subscription,s=void 0===f?B:f,d=e.validate,v=e.validateOnBlur,m=V(e,["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"]),p={debug:t,destroyOnUnregister:r,initialValues:u,keepDirtyOnReinitialize:o,mutators:c,onSubmit:l,validate:d,validateOnBlur:v},b=function(e){var t=E.useRef();return t.current||(t.current=e()),t.current}(function(){var e=i||F.createForm(p);return e.pauseValidation(),e}),g=P.useState(function(){var t={};return b.subscribe(function(e){t=e},s)(),t}),y=g[0],h=g[1],O=A(y);P.useEffect(function(){b.isValidationPaused()&&b.resumeValidation();var e=[b.subscribe(function(e){k(e,O.current)||h(e)},s)].concat(n?n.map(function(e){return e(b)}):[]);return function(){b.pauseValidation(),e.forEach(function(e){return e()})}},[n]),C(t,function(){b.setConfig("debug",t)}),C(r,function(){b.destroyOnUnregister=!!r}),C(u,function(){b.setConfig("initialValues",u)},a||k),C(o,function(){b.setConfig("keepDirtyOnReinitialize",o)}),C(c,function(){b.setConfig("mutators",c)}),C(l,function(){b.setConfig("onSubmit",l)}),C(d,function(){b.setConfig("validate",d)}),C(v,function(){b.setConfig("validateOnBlur",v)});var S={form:U({},b,{reset:function(e){j(e)?b.reset():b.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),b.submit()}};return R(S,y),P.createElement(x.Provider,{value:b},w(U({},m,{__versions:q}),S,"ReactFinalForm"))}function N(e){var t=P.useContext(x);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}function a(e){var t=void 0===e?{}:e,n=t.onChange,r=t.subscription,i=void 0===r?B:r,u=N("useFormState"),a=P.useRef(!0),o=P.useRef(n);o.current=n;var c=P.useState(function(){var t={};return u.subscribe(function(e){t=e},i)(),n&&n(t),t}),l=c[0],f=c[1];P.useEffect(function(){return u.subscribe(function(e){a.current?a.current=!1:(f(e),o.current&&o.current(e))},i)},[]);var s={};return R(s,l),s}function r(e){var t=e.onChange,n=e.subscription,r=V(e,["onChange","subscription"]),i=N("FormSpy"),u=a({onChange:t,subscription:n});return t?null:w(U({},r,{},{form:U({},i,{reset:function(e){j(e)?i.reset():i.reset(e)}})}),u,"FormSpy")}function z(e,t){return void 0===e?"":e}function _(e,t){return""===e?void 0:e}var I="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,L=F.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function S(n,e){function r(e){return E.registerField(n,e,y,{afterSubmit:i,beforeSubmit:function(){return w.current()},defaultValue:c,getValidator:function(){return V.current},initialValue:d,isEqual:v,validateFields:S})}var t=void 0===e?{}:e,i=t.afterSubmit,u=t.allowNull,a=t.beforeSubmit,o=t.component,c=t.defaultValue,l=t.format,f=void 0===l?z:l,s=t.formatOnBlur,d=t.initialValue,v=t.isEqual,m=t.multiple,p=t.parse,b=void 0===p?_:p,g=t.subscription,y=void 0===g?L:g,h=t.type,O=t.validate,S=t.validateFields,F=t.value,E=N("useField"),V=A(O),w=A(function(){if(s){var e=f(j.value,j.name);e!==j.value&&j.change(e)}return a&&a()}),C=P.useRef(!0),k=P.useState(function(){var t={},e=E.destroyOnUnregister;return E.destroyOnUnregister=!1,r(function(e){t=e})(),E.destroyOnUnregister=e,t}),j=k[0],x=k[1];P.useEffect(function(){return r(function(e){C.current?C.current=!1:x(e)})},[n,c,d,v]);var R={onBlur:P.useCallback(function(e){if(j.blur(),s){var t=E.getFieldState(j.name);j.change(f(t.value,j.name))}},[j.name,f,s]),onChange:P.useCallback(function(e){var t=e&&e.target?function(e,t,n,r){if(!r&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(r&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,u=i.type,a=i.value,o=i.checked;switch(u){case"checkbox":if(void 0===n)return!!o;if(o)return Array.isArray(t)?t.concat(n):[n];if(!Array.isArray(t))return t;var c=t.indexOf(n);return c<0?t:t.slice(0,c).concat(t.slice(c+1));case"select-multiple":return function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n];r.selected&&t.push(r.value)}return t}(e.target.options);default:return a}}(e,j.value,F,I):e;j.change(b(t,n))},[F,n,b,j.change,j.value,h]),onFocus:P.useCallback(function(e){j.focus()},[])},q={};!function(e,t){D(e,t,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"])}(q,j);var B=U({name:n,get value(){var e=j.value;return s?"input"===o&&(e=z(e)):e=f(e,n),null!==e||u||(e=""),"checkbox"===h||"radio"===h?F:"select"===o&&m?e||[]:e},get checked(){return"checkbox"===h?void 0===F?!!j.value:!(!Array.isArray(j.value)||!~j.value.indexOf(F)):"radio"===h?j.value===F:void 0}},R);return m&&(B.multiple=m),void 0!==h&&(B.type=h),{input:B,meta:q}}e.Field=function(e){var t=e.afterSubmit,n=e.allowNull,r=e.beforeSubmit,i=e.children,u=e.component,a=e.defaultValue,o=e.format,c=e.formatOnBlur,l=e.initialValue,f=e.isEqual,s=e.multiple,d=e.name,v=e.parse,m=e.subscription,p=e.type,b=e.validate,g=e.validateFields,y=e.value,h=V(e,["afterSubmit","allowNull","beforeSubmit","children","component","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"]),O=S(d,{afterSubmit:t,allowNull:n,beforeSubmit:r,children:i,component:u,defaultValue:a,format:o,formatOnBlur:c,initialValue:l,isEqual:f,multiple:s,parse:v,subscription:m,type:p,validate:b,validateFields:g,value:y});return"function"==typeof i?i(U({},O,{},h)):"string"==typeof u?P.createElement(u,U({},O.input,{children:i},h)):w(U({children:i,component:u},h),O,"Field("+d+")")},e.Form=n,e.FormSpy=r,e.useField=S,e.useForm=N,e.useFormState=a,e.version=t,e.withTypes=function(){return{Form:n,FormSpy:r}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
